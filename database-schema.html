<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Database Schema | Anurag Meshram</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.3/sql-wasm.js"></script>
</head>
<body>

  <nav class="navbar">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">&lt;Anurag<span>Meshram</span>/&gt;</a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="experience.html">Experience</a></li>
        <li><a href="eda.html">EDA</a></li>
        <li class="nav-dropdown">
          <a href="#">SQL Data Load</a>
          <div class="nav-dropdown-menu">
            <a href="sql-data-load.html">E-Commerce</a>
            <a href="sql-data-load-retail.html">Retail Sales</a>
          </div>
        </li>
        <li class="nav-dropdown">
          <a href="#">DB Schema</a>
          <div class="nav-dropdown-menu">
            <a href="database-schema.html">E-Commerce</a>
            <a href="database-schema-retail.html">Retail Sales</a>
          </div>
        </li>
        <li><a href="powerbi.html">Power BI</a></li>
        <li><a href="assets/resume/Anurag_Meshram_Resume.pdf" class="nav-resume-btn" download>&#11015; Resume</a></li>
      </ul>
      <button class="hamburger" aria-label="Toggle navigation"><span></span><span></span><span></span></button>
    </div>
  </nav>

  <div class="page-content">

    <section class="project-hero">
      <div class="container">
        <div class="project-hero-content fade-in">
          <div class="breadcrumb">
            <a href="index.html">Home</a><span class="separator">/</span><span>Database Schema Design</span>
          </div>
          <h1 class="project-title">Database Schema Design</h1>
          <div class="project-meta">
            <span class="meta-item"><span class="meta-icon">&#128196;</span> 3NF Normalized Design</span>
            <span class="meta-item"><span class="meta-icon">&#128451;</span> 8 Tables</span>
            <span class="meta-item"><span class="meta-icon">&#128295;</span> MySQL</span>
          </div>
          <div class="card-tags">
            <span class="tag orange">MySQL</span><span class="tag">SQL</span><span class="tag blue">3NF</span>
            <span class="tag cyan">Database Design</span><span class="tag">ER Modeling</span>
          </div>
          <div class="project-actions">
            <a href="src/database_schema.md" class="btn btn-sm btn-outline" download>&#11015; Schema Documentation</a>
            <a href="src/data_load.py" class="btn btn-sm btn-outline" download>&#11015; data_load.py</a>
          </div>
        </div>
      </div>
    </section>

    <div class="container">

      <div class="content-section fade-in">
        <h2>Project Overview</h2>
        <p>Fully normalized (Third Normal Form) relational database schema for an e-commerce platform. Transforms a single denormalized spreadsheet into 8 interrelated tables with proper primary keys, foreign keys, unique constraints, and performance indexes.</p>
        <div class="info-grid">
          <div class="info-card"><div class="value">8</div><div class="label">Tables</div></div>
          <div class="info-card"><div class="value">3NF</div><div class="label">Normalization Level</div></div>
          <div class="info-card"><div class="value">6</div><div class="label">Foreign Keys</div></div>
          <div class="info-card"><div class="value">12+</div><div class="label">Indexes</div></div>
        </div>
      </div>

      <!-- ER Diagram -->
      <div class="content-section fade-in">
        <h2>Entity Relationship Diagram</h2>
        <div class="schema-container">
<pre>
  ┌──────────────────┐
  │   CUSTOMERS      │
  ├──────────────────┤
  │ PK customer_id   │
  │    customer_type  │
  └────────┬─────────┘
           │ 1:N
           ↓
  ┌──────────────────┐           ┌──────────────────┐
  │   PRODUCTS       │           │   LOCATIONS      │
  ├──────────────────┤           ├──────────────────┤
  │ PK sku           │           │ PK location_id   │
  │    product_name   │           │    city           │
  │    category       │           │    state          │
  │    unit_price     │           └──────────────────┘
  └────────┬─────────┘                     ↑ N:1
           │ 1:N                           │
           ↓                               │
  ┌──────────────────┐           ┌──────────────────┐           ┌──────────────────┐
  │   ORDER_ITEMS    │           │     ORDERS       │           │   DISCOUNTS      │
  ├──────────────────┤           ├──────────────────┤           ├──────────────────┤
  │ PK order_item_id │◄───┐  ┌──│ PK order_id      │           │ PK discount_id   │
  │ FK order_id      │    │  │  │ FK customer_id    │           │    discount_code  │
  │ FK sku           │    │  │  │ FK location_id    │           │    discount_pct   │
  │    quantity       │    │  │  │ FK discount_id    │──────►   └──────────────────┘
  │    unit_price     │    │  │  │    order_date     │
  │    line_total     │    │  │  │    subtotal       │
  └──────────────────┘    │  │  │    total_amount    │
                          │  │  │    payment_method  │
                          │  │  │    status          │
                          │  │  └────────┬──────────┘
                          │  │           │ 1:1
                          │  │           ↓
                          │  │  ┌──────────────────┐
                          │  │  │   DELIVERIES     │
                          │  │  ├──────────────────┤
                          │  │  │ PK delivery_id   │
                          │  └──│ FK order_id      │
                          │     │    warehouse      │
                          │     │    delivery_date  │
                          │     │    days_to_deliver │
                          │     └────────┬─────────┘
                          │              │ 1:1
                          │              ↓
                          │     ┌──────────────────┐
                          │     │    RETURNS        │
                          │     ├──────────────────┤
                          │     │ PK return_id     │
                          └─────│ FK order_id      │
                                │    return_date    │
                                │    return_reason  │
                                │    refund_status  │
                                │    return_window  │
                                └──────────────────┘
</pre>
        </div>
      </div>

      <!-- SQL Playground -->
      <div class="content-section fade-in">
        <h2>Try It Yourself &mdash; Live SQL Playground</h2>
        <p>All 8 tables are loaded with sample data. Run any query to explore the schema:</p>

        <div class="sql-runner">
          <div class="sql-runner-header">
            <h4>&#9654; SQL Playground</h4>
            <span class="sql-runner-status">Loading...</span>
          </div>
          <div class="sql-presets">
            <button class="sql-preset-btn" data-query="SELECT name FROM sqlite_master WHERE type='table' ORDER BY name;">Show All Tables</button>
            <button class="sql-preset-btn" data-query="SELECT o.order_id, c.customer_id, c.customer_type, p.product_name, p.category, oi.quantity, o.total_amount, l.city, l.state, o.status FROM orders o JOIN customers c ON o.customer_id = c.customer_id JOIN order_items oi ON o.order_id = oi.order_id JOIN products p ON oi.sku = p.sku JOIN locations l ON o.location_id = l.location_id LIMIT 10;">Order Details (5-table JOIN)</button>
            <button class="sql-preset-btn" data-query="SELECT p.category, SUM(o.total_amount) AS total_revenue, COUNT(DISTINCT o.order_id) AS order_count, ROUND(AVG(o.total_amount),2) AS avg_order_value FROM orders o JOIN order_items oi ON o.order_id = oi.order_id JOIN products p ON oi.sku = p.sku GROUP BY p.category ORDER BY total_revenue DESC;">Revenue by Category</button>
            <button class="sql-preset-btn" data-query="SELECT c.customer_id, c.customer_type, COUNT(o.order_id) AS total_orders, ROUND(SUM(o.total_amount),2) AS lifetime_value, ROUND(AVG(o.total_amount),2) AS avg_order FROM customers c JOIN orders o ON c.customer_id = o.customer_id GROUP BY c.customer_id, c.customer_type ORDER BY lifetime_value DESC LIMIT 10;">Customer Lifetime Value</button>
            <button class="sql-preset-btn" data-query="SELECT r.return_reason, COUNT(*) AS return_count, ROUND(AVG(o.total_amount),2) AS avg_value, ROUND(SUM(o.total_amount),2) AS total_refunded FROM returns r JOIN orders o ON r.order_id = o.order_id GROUP BY r.return_reason ORDER BY return_count DESC;">Return Analysis</button>
            <button class="sql-preset-btn" data-query="SELECT d.warehouse, COUNT(*) AS deliveries, ROUND(AVG(d.days_to_delivery),1) AS avg_days FROM deliveries d GROUP BY d.warehouse ORDER BY deliveries DESC;">Warehouse Performance</button>
          </div>
          <div class="sql-editor">
            <textarea placeholder="Write your SQL query here... (Ctrl+Enter to run)">SELECT name FROM sqlite_master WHERE type='table' ORDER BY name;</textarea>
          </div>
          <div class="sql-actions">
            <button class="sql-run-btn">&#9654; Run Query</button>
            <button class="sql-clear-btn">Clear</button>
          </div>
          <div class="sql-result" style="display:none"></div>
        </div>
      </div>

      <!-- Table Definitions -->
      <div class="content-section fade-in">
        <h2>Table Definitions</h2>

        <h3>1. CUSTOMERS</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">SQL</span><div class="code-dots"><span></span><span></span><span></span></div></div>
          <div class="code-body"><pre><span class="sk">CREATE TABLE</span> customers (
    customer_id   <span class="typ">VARCHAR(50)</span> <span class="sk">PRIMARY KEY</span>,
    customer_type <span class="typ">ENUM</span>(<span class="str">'New'</span>, <span class="str">'Returning'</span>) <span class="sk">NOT NULL</span>,
    created_at    <span class="typ">TIMESTAMP</span> <span class="sk">DEFAULT</span> <span class="sf">CURRENT_TIMESTAMP</span>,
    <span class="sk">INDEX</span> idx_customer_type (customer_type)
);</pre></div>
        </div>

        <h3>2. PRODUCTS</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">SQL</span><div class="code-dots"><span></span><span></span><span></span></div></div>
          <div class="code-body"><pre><span class="sk">CREATE TABLE</span> products (
    sku          <span class="typ">VARCHAR(50)</span> <span class="sk">PRIMARY KEY</span>,
    product_name <span class="typ">VARCHAR(255)</span> <span class="sk">NOT NULL</span>,
    category     <span class="typ">VARCHAR(100)</span> <span class="sk">NOT NULL</span>,
    unit_price   <span class="typ">DECIMAL(10, 2)</span> <span class="sk">NOT NULL</span>,
    <span class="sk">INDEX</span> idx_category (category),
    <span class="sk">INDEX</span> idx_price (unit_price)
);</pre></div>
        </div>

        <h3>3. ORDERS</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">SQL</span><div class="code-dots"><span></span><span></span><span></span></div></div>
          <div class="code-body"><pre><span class="sk">CREATE TABLE</span> orders (
    order_id       <span class="typ">VARCHAR(50)</span> <span class="sk">PRIMARY KEY</span>,
    customer_id    <span class="typ">VARCHAR(50)</span> <span class="sk">NOT NULL</span>,
    location_id    <span class="typ">INT</span> <span class="sk">NOT NULL</span>,
    discount_id    <span class="typ">INT</span> <span class="sk">NULL</span>,
    order_date     <span class="typ">DATE</span> <span class="sk">NOT NULL</span>,
    subtotal       <span class="typ">DECIMAL(10, 2)</span> <span class="sk">NOT NULL</span>,
    discount_amount <span class="typ">DECIMAL(10, 2)</span> <span class="sk">DEFAULT</span> <span class="num">0.00</span>,
    total_amount   <span class="typ">DECIMAL(10, 2)</span> <span class="sk">NOT NULL</span>,
    payment_method <span class="typ">VARCHAR(50)</span> <span class="sk">NOT NULL</span>,
    source         <span class="typ">VARCHAR(50)</span> <span class="sk">NOT NULL</span>,
    status         <span class="typ">ENUM</span>(<span class="str">'Delivered'</span>, <span class="str">'RTO'</span>, <span class="str">'Cancelled'</span>) <span class="sk">NOT NULL</span>,
    <span class="sk">FOREIGN KEY</span> (customer_id) <span class="sk">REFERENCES</span> customers(customer_id),
    <span class="sk">FOREIGN KEY</span> (location_id) <span class="sk">REFERENCES</span> locations(location_id),
    <span class="sk">FOREIGN KEY</span> (discount_id) <span class="sk">REFERENCES</span> discounts(discount_id)
);</pre></div>
        </div>

        <h3>4. RETURNS</h3>
        <div class="code-block">
          <div class="code-header"><span class="code-lang">SQL</span><div class="code-dots"><span></span><span></span><span></span></div></div>
          <div class="code-body"><pre><span class="sk">CREATE TABLE</span> returns (
    return_id         <span class="typ">INT</span> <span class="sk">AUTO_INCREMENT PRIMARY KEY</span>,
    order_id          <span class="typ">VARCHAR(50)</span> <span class="sk">UNIQUE NOT NULL</span>,
    return_date       <span class="typ">DATE</span> <span class="sk">NULL</span>,
    return_reason     <span class="typ">VARCHAR(100)</span> <span class="sk">NULL</span>,
    refund_status     <span class="typ">ENUM</span>(<span class="str">'Processed'</span>, <span class="str">'Pending'</span>, <span class="str">'Not Applicable'</span>) <span class="sk">NOT NULL</span>,
    return_window_days <span class="typ">INT</span> <span class="sk">NULL</span>,
    <span class="sk">FOREIGN KEY</span> (order_id) <span class="sk">REFERENCES</span> orders(order_id) <span class="sk">ON DELETE CASCADE</span>
);</pre></div>
        </div>
      </div>

      <!-- Full Schema Doc -->
      <div class="content-section fade-in">
        <h2>Full Schema Documentation</h2>
        <div class="code-viewer">
          <div class="code-viewer-header">
            <div class="code-viewer-title">
              <span class="file-icon">&#128196;</span>
              <span class="file-name">database_schema.md</span>
              <span class="file-size">&mdash; Complete schema with all 8 tables</span>
            </div>
            <div class="code-viewer-toggle">View Full Docs <span class="arrow">&#9660;</span></div>
          </div>
          <div class="code-viewer-body">
            <pre><span class="line-num">  1</span><span class="cmt"># E-Commerce Database Schema - Normalized Model</span>
<span class="line-num">  2</span><span class="cmt">## Database: ecommerce_db</span>
<span class="line-num">  3</span>
<span class="line-num">  4</span><span class="cmt">## Tables:</span>
<span class="line-num">  5</span>  1. customers     - PK: customer_id
<span class="line-num">  6</span>  2. products      - PK: sku
<span class="line-num">  7</span>  3. locations     - PK: location_id (UNIQUE city+state)
<span class="line-num">  8</span>  4. discounts     - PK: discount_id
<span class="line-num">  9</span>  5. orders        - PK: order_id (FKs to customers, locations, discounts)
<span class="line-num"> 10</span>  6. order_items   - PK: order_item_id (FKs to orders, products)
<span class="line-num"> 11</span>  7. deliveries    - PK: delivery_id (FK to orders, CASCADE delete)
<span class="line-num"> 12</span>  8. returns       - PK: return_id (FK to orders, CASCADE delete)
<span class="line-num"> 13</span>
<span class="line-num"> 14</span><span class="cmt">## Normalization: Before vs After</span>
<span class="line-num"> 15</span>  Before: 345 rows x 37 columns = 12,765 data points
<span class="line-num"> 16</span>  After:  ~1,920 rows across 8 tables (efficient storage)</pre>
          </div>
        </div>
        <p style="margin-top:1rem;font-size:0.9rem">
          <a href="src/database_schema.md" download>&#11015; Download full database_schema.md</a>
        </p>
      </div>

      <!-- Normalization Benefits -->
      <div class="content-section fade-in">
        <h2>Normalization Benefits</h2>
        <div class="info-grid">
          <div class="info-card"><div class="value" style="font-size:1.2rem">12,765</div><div class="label">Before (Data Points)</div></div>
          <div class="info-card"><div class="value" style="font-size:1.2rem">~1,920</div><div class="label">After (Total Rows)</div></div>
        </div>
        <div class="highlight-box">
          <h4>Key Improvements</h4>
          <ul>
            <li>Eliminates data redundancy &mdash; customer, product, location stored once</li>
            <li>Foreign keys enforce referential integrity across all tables</li>
            <li>Easy to extend without restructuring existing tables</li>
            <li>Indexes on commonly queried columns for fast lookups</li>
            <li>Scales to millions of records efficiently</li>
            <li>Single-point updates &mdash; change product price in one place</li>
          </ul>
        </div>
      </div>

    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="footer-social">
        <a href="mailto:anuragmesh@gmail.com">&#9993; Email</a>
        <a href="https://tiny.cc/c9zx001" target="_blank" rel="noopener">LinkedIn</a>
      </div>
      <div class="footer-links">
        <a href="index.html">Home</a><a href="experience.html">Experience</a>
        <a href="index.html#projects">Projects</a>
        <a href="assets/resume/Anurag_Meshram_Resume.pdf" download>Resume</a>
      </div>
      <p>&copy; 2026 Anurag Meshram. Built with passion for data.</p>
    </div>
  </footer>

  <script src="assets/js/main.js"></script>
  <script src="assets/js/sql-runner.js"></script>
</body>
</html>
